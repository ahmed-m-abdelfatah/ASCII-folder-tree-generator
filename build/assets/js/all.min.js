const $input=document.querySelector("#input"),$output=document.querySelector("#output"),$downloadBtn=document.querySelector("#download"),$copyBtn=document.querySelector("#copy"),regex=($input.addEventListener("input",render),$copyBtn.addEventListener("click",()=>copyToClipboard($output)),{newline:/\r?\n/,lineStructure:/^(#+)\s*(.+)$/});function render(){var e=parse($input.value),t=gen(e).join("\n");$output.textContent=t;const n=generateBatFile(e);$downloadBtn.removeEventListener(r);let r=$downloadBtn.addEventListener("click",()=>downloadBatFile(n))}function parse(e){var t=[];let r={level:-1,children:t};return e.split(regex.newline).forEach(e=>{if(regex.lineStructure.test(e)){for(var[,e,t]=e.match(regex.lineStructure),n=e.length,e={level:n,text:t,children:[]};n<=r.level;)r=r.parent;r.children.push(e),e.parent=r,r=e}}),t}function gen(n,r=0,o=""){return n.map((e,t)=>{t=t===n.length-1;return[(r?o+(t?"└":"├")+"── ":"")+(e.text||""),...gen(e.children,r+1,r?o+(t?"    ":"│   "):"")].join("\n")})}function copyToClipboard(e){navigator.clipboard.writeText(e.textContent).then(()=>{alert("Copied to clipboard!")}).catch(e=>{console.error("Failed to copy text: ",e)})}function generateBatFile(e){const r=[];return e.forEach(e=>{var t=e.text.trim().replace(/[^\w\s]/gi,""),n=`mkdir "${t}"`;r.push(n),0<e.children.length&&(r.push(`cd "${t}"`),r.push(...generateBatFile(e.children)),r.push("cd .."))}),r}function downloadBatFile(e){var e=e.join("\n"),e=new Blob([e],{type:"text/plain"}),e=URL.createObjectURL(e),t=document.createElement("a");t.href=e,t.download="GENERATE-FOLDERS.bat",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e)}$input.value=`
This folder structure is useful for civil engineers (designers) who working with BIM

# BIM Folder tree
## WIB (Work in progress)
### _DATA
### CALCULATIONS
#### SAP
#### SAFE
#### ETABS
### REPORT
### RVT
### TEKLA
### CAD
## EIP (Employers Information Requirements)
### YYMMDD-FOLDER NAME 1
### YYMMDD-FOLDER NAME 2
## PUBLISHED
### CALCULATIONS
#### SAP
#### SAFE
#### ETABS
### DWG
### PDF
### REPORT
### REVIT IFC
`.trim(),render();